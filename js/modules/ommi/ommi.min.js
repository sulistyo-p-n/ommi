/*! OMMI v0.0.0.0 | (c) Sulistyo Ponco Nugroho */
let isAllVisible=!1;const ColorType={Solid:Symbol("solid"),Linear:Symbol("linear"),Radial:Symbol("radial")},Direction={Left:Symbol("left"),Right:Symbol("right"),Up:Symbol("up"),Down:Symbol("down")},Comparation={EqualTo:Symbol("=="),NotEqualTo:Symbol("!="),GreaterThan:Symbol(">"),LessThan:Symbol("<"),GreaterThanOrEqualTo:Symbol(">="),LessThanOrEqualTo:Symbol("<=")};class Point{constructor(t,e){this.x=t,this.y=e}}class Anchor{constructor(t,e){this.h=t,this.v=e}}class Filter{constructor(){this.title="",this.desc="",this.isActive=!0}}class Variable{constructor(){this.name="",this.value=!1,this.fromVariable=null}getValue(){return null==this.fromVariable?this.value:this.fromVariable.getValue()}}class CheckVariable{constructor(){this.variable=new Variable,this.comparation=Comparation.EqualTo,this.activeValue=!0}isActive(){switch(this.comparation){case Comparation.EqualTo:return this.variable.getValue()==this.activeValue;case Comparation.NotEqualTo:return this.variable.getValue()!=this.activeValue;case Comparation.GreaterThan:return this.variable.getValue()>this.activeValue;case Comparation.LessThan:return this.variable.getValue()<this.activeValue;case Comparation.GreaterThanOrEqualTo:return this.variable.getValue()>=this.activeValue;case Comparation.LessThanOrEqualTo:return this.variable.getValue()<=this.activeValue;default:return!1}}}class Alarm{constructor(){this.title="",this.desc="",this.createdDate=null,this.ackDate=null,this.clearedDate=null,this.variable=new CheckVariable,this.filters=[]}isActive(){if(!Array.isArray(this.variable))return this.variable.isActive();let t=!0;for(let e of this.variable)t=t&&e.isActive();return t}isShow(){let t=!1;for(let e of this.filters)t=t||e.isActive();return t}firstCheck(){return this.isActive()&&null==this.createdDate}refresh(){this.isActive()?(null==this.createdDate||null!=this.createdDate&&null!=this.clearedDate)&&(this.createdDate=new Date,this.ackDate=null,this.clearedDate=null):null!=this.createdDate&&(this.clearedDate=new Date,this.createdDate=null)}ack(){}clear(){this.createdDate=null,this.ackDate=null,this.clearedDate=null}isFiltered(){let t=!1;for(let e of this.filters)t=t||e.isActive;return t}}class Style{constructor(){this.scale=1,this.isUseFill=!0,this.fillType=ColorType.Solid,this.fillColor=6710886,this.fillAlpha=1,this.isUseLine=!0,this.lineType=ColorType.Solid,this.lineSize=1,this.lineColor=16777215,this.lineAlpha=1,this.isUseText=!0,this.text="",this.fontColor=16777215,this.fontSize=12,this.fontFamily="Arial",this.isFontBold=!1,this.isFontItalic=!1,this.textAnchor=new Anchor(.5,.5),this.isReadable=!0,this.lastFillTexture=null,this.lastFillScale=1,this.lastLineTexture=null,this.lastLineScale=1}clone(){let t=new Style;return t.scale=this.scale,t.isUseFill=this.isUseFill,t.fillColor=this.fillColor,t.fillAlpha=this.fillAlpha,t.isUseLine=this.isUseLine,t.lineType=this.lineType,t.lineSize=this.lineSize,t.lineColor=this.lineColor,t.lineAlpha=this.lineAlpha,t.isUseText=this.isUseText,t.text=this.text,t.fontColor=this.fontColor,t.fontSize=this.fontSize,t.fontFamily=this.fontFamily,t.isFontBold=this.isFontBold,t.isFontItalic=this.isFontItalic,t.textAnchor=new Anchor(this.textAnchor.h,this.textAnchor.v),t.isReadable=this.isReadable,t}}class Mark{constructor(){this.variable=new CheckVariable,this.style=new Style}isActive(){if(!Array.isArray(this.variable))return this.variable.isActive();let t=!0;for(let e of this.variable)t=t&&e.isActive();return t}}class BaseObject{constructor(){this.point=new Point(0,0),this.desc="",this.tag=null,this.searchTag=null,this.filters=[]}addAt(t){}reDraw(t,e,i,s){}isContainsPoint(t){return!1}isFiltered(){let t=!1;for(let e of this.filters)t=t||e.isActive;return t}hide(){}}class GroupObject extends BaseObject{constructor(){super(),this.variables=[],this.baseObjects=[],this.configs={}}addAt(t){for(let e of this.baseObjects)e.addAt(t)}reDraw(t,e,i,s){for(let l of this.baseObjects){let h=new Point(oriPoint.x+this.point.x*s,oriPoint.y+this.point.y*s);l.reDraw(h,e,i,s)}}isContainsPoint(t){let e=!1;for(let i of this.baseObjects)e=e||i.isContainsPoint(t);return e}hide(){for(let t of this.baseObjects)t.hide()}}class DrawObject extends BaseObject{constructor(){super(),this.anchor=new Anchor(.5,.5),this.w=10,this.h=10,this.a=0,this.isHideNA=!1,this.baseStyle=new Style,this.marks=[],this.obj=new PIXI.Graphics,this.objText=new PIXI.Text}getWidth(){let t=this.getActiveStyle();return this.w*t.scale}getHeight(){let t=this.getActiveStyle();return this.h*t.scale}addAt(t){t.addChild(this.obj),t.addChild(this.objText)}getGradient(t,e,i){let s=this.getWidth()*i,l=this.getHeight()*i,h=document.createElement("canvas");h.width=s,h.height=l;let n=h.getContext("2d"),o=n.createLinearGradient(0,l/2,s,l/2);for(let r=0;r<t.length;r++){let a=t[r]>>16&255,c=t[r]>>8&255,$=255&t[r];o.addColorStop(1/(t.length-1)*r,"rgba("+a+","+c+","+$+","+e[r]+")")}return n.fillStyle=o,n.fillRect(0,0,s,l),PIXI.Texture.from(h)}getActiveStyle(){for(let t of this.marks)if(t.isActive())return t.style;return this.isHideNA&&!isAllVisible?null:this.baseStyle}setShape(t,e){t.drawRect(0,0,this.getWidth()*e,this.getHeight()*e)}setFill(t,e){t.isUseFill&&(Array.isArray(t.fillColor)?t.fillType==ColorType.Solid||t.fillColor.length<=1?this.obj.beginFill(t.fillColor[0],t.fillAlpha[0]):((null==t.fillTexture||t.lastFillScale!=e)&&(t.fillTexture=this.getGradient(t.fillColor,t.fillAlpha,e),t.lastFillScale=e),t.fillType==ColorType.Linear?this.obj.beginTextureFill({texture:t.fillTexture}):t.fillType==ColorType.Radial&&this.obj.beginTextureFill({texture:t.fillTexture})):this.obj.beginFill(t.fillColor,t.fillAlpha),this.setShape(this.obj,e),this.obj.endFill())}setLine(t,e){t.isUseLine&&(Array.isArray(t.lineColor)?t.lineType==ColorType.Solid||t.lineColor.length<=1?this.obj.lineStyle(t.lineSize*e,t.lineColor[0],t.lineAlpha[0]):((null==t.lineTexture||this.lastLineScale!=e)&&(t.lineTexture=this.getGradient(t.lineColor,t.lineAlpha,e),t.lastLineScale=e),t.lineType==ColorType.Linear?this.obj.lineTextureStyle({width:t.lineSize*e,texture:t.lineTexture}):t.lineType==ColorType.Radial&&this.obj.lineTextureStyle({width:t.lineSize*e,texture:t.lineTexture})):this.obj.lineStyle(t.lineSize*e,t.lineColor,t.lineAlpha),this.setShape(this.obj,e),this.obj.endFill())}setText(t,e){t.isUseText&&(this.objText.text=t.text,this.objText.style=new PIXI.TextStyle({fontFamily:t.fontFamily,fontSize:t.fontSize*e*1.3,fill:t.fontColor,FontStyle:t.isFontItalic?"italic":"normal",fontWeight:t.isFontBold?"bold":"normal"}))}setShapePosition(t,e){let i=new Point(t.x+this.point.x*e,t.y+this.point.y*e),s=this.getWidth()*e,l=this.getHeight()*e;this.obj.position.set(i.x,i.y),this.obj.pivot.set(s*this.anchor.h,l*this.anchor.v),this.obj.rotation=this.a}setTextPosition(t,e,i){let s=this.anchor.h,l=this.anchor.v,h=e.textAnchor.h,n=e.textAnchor.v,o=this.a;e.isReadable&&this.a<270*Math.PI/180&&this.a>=90*Math.PI/180&&(s=1-s,h=1-h,o+=Math.PI);let r=new Point(t.x+this.point.x*i,t.y+this.point.y*i),a=this.getWidth()*i,c=this.getHeight()*i,$=a*h-a*s,x=c*n-c*l,g=Math.sqrt($*$+x*x),u=Math.atan2(x,$),y=g*Math.cos(o+u),d=g*Math.sin(o+u);this.objText.position.set(r.x+y,r.y+d),this.objText.rotation=o,this.objText.anchor.set(h,n)}isOverLap(t,e,i,s){let l=this.getWidth()*s+0,h=this.getHeight()*s+0,n=new Point(t.x+this.point.x*s-l*this.anchor.h,t.y+this.point.y*s-h*this.anchor.v);return!(n.x+l<-0)&&!(n.x>e)&&!(n.y+h<-0)&&!(n.y>i)}reDraw(t,e,i,s){let l=this.getActiveStyle();if(this.obj.clear(),null==l||!this.isOverLap(t,e,i,s)){this.obj.visible=!1,this.objText.visible=!1;return}new Point(t.x+this.point.x*s,t.y+this.point.y*s);let h=this.getWidth()*s,n=this.getHeight()*s;this.obj.visible=h>3||n>3,this.objText.visible=l.fontSize*s*1.3>4.5,this.setFill(l,s),this.setLine(l,s),this.setText(l,s),this.setShapePosition(t,s),this.setTextPosition(t,l,s)}isContainsPoint(t){return!!this.obj.containsPoint(new PIXI.Point(t.x,t.y))||!!this.objText.containsPoint(new PIXI.Point(t.x,t.y))}hide(){this.obj.visible=!1,this.objText.visible=!1}}class RectObject extends DrawObject{constructor(){super()}setShape(t,e){t.drawRect(0,0,this.getWidth()*e,this.getHeight()*e)}}class RoundRectObject extends DrawObject{constructor(){super(),this.roundTip=4}setShape(t,e){t.drawRoundedRect(0,0,this.getWidth()*e,this.getHeight()*e,this.roundTip*e)}}class EllipseObject extends DrawObject{constructor(){super()}setShape(t,e){t.drawEllipse(this.getWidth()*e/2,this.getHeight()*e/2,this.getWidth()*e/2,this.getHeight()*e/2)}}class DiamondObject extends DrawObject{constructor(){super()}setShape(t,e){t.moveTo(this.getWidth()*e/2,0),t.lineTo(this.getWidth()*e,this.getHeight()*e/2),t.lineTo(this.getWidth()*e/2,this.getHeight()*e),t.lineTo(0,this.getHeight()*e/2),t.closePath()}}class ParallelogramObject extends DrawObject{constructor(){super(),this.size=4,this.dir=Direction.Left}setShape(t,e){switch(this.dir){case Direction.Right:t.moveTo(this.getWidth()*e,0),t.lineTo(this.getWidth()*e-this.size*e,0),t.lineTo(0,this.getHeight()*e),t.lineTo(this.size*e,this.getHeight()*e),t.closePath();break;case Direction.Up:t.moveTo(0,0),t.lineTo(0,this.size*e),t.lineTo(this.getWidth()*e,this.getHeight()*e),t.lineTo(this.getWidth()*e,this.getHeight()*e-this.size*e),t.closePath();break;case Direction.Left:t.moveTo(0,0),t.lineTo(this.getWidth()*e-this.size*e,this.getHeight()*e),t.lineTo(this.getWidth()*e,this.getHeight()*e),t.lineTo(this.size*e,0),t.closePath();break;case Direction.Down:t.moveTo(0,this.getHeight()*e),t.lineTo(this.getWidth()*e,this.size*e),t.lineTo(this.getWidth()*e,0),t.lineTo(0,this.getHeight()*e-this.size*e),t.closePath()}}}class TriangleObject extends DrawObject{constructor(){super(),this.dir=Direction.Left}setShape(t,e){switch(this.dir){case Direction.Right:t.moveTo(this.getWidth()*e,this.getHeight()*e/2),t.lineTo(0,0),t.lineTo(0,this.getHeight()*e),t.closePath();break;case Direction.Up:t.moveTo(this.getWidth()*e/2,0),t.lineTo(0,this.getHeight()*e),t.lineTo(this.getWidth()*e,this.getHeight()*e),t.closePath();break;case Direction.Left:t.moveTo(0,this.getHeight()*e/2),t.lineTo(this.getWidth()*e,this.getHeight()*e),t.lineTo(this.getWidth()*e,0),t.closePath();break;case Direction.Down:t.moveTo(this.getWidth()*e/2,this.getHeight()*e),t.lineTo(this.getWidth()*e,0),t.lineTo(0,0),t.closePath()}}}class LineObject extends DrawObject{constructor(){super(),this.d=10,this.joins=[],this.isCurve=!0,this.baseStyle.isUseLine=!1}getShapePoints(){let t=[];if(this.joins.length<=1)return t;let e=null,i=null;for(let s=0;s<this.joins.length-1;s++){let l=this.joins[s+1].x-this.joins[s].x,h=this.joins[s+1].y-this.joins[s].y,n=Math.atan2(h,l),o=180*n/Math.PI,r=this.joins[s].x+this.d/2*Math.cos((o+90)*Math.PI/180),a=this.joins[s].y+this.d/2*Math.sin((o+90)*Math.PI/180),c=this.joins[s+1].x+this.d/2*Math.cos((o+90)*Math.PI/180),$=this.joins[s+1].y+this.d/2*Math.sin((o+90)*Math.PI/180);null==e?(e=new Point(r,a),i=new Point(c,$),t.push(new Point(r,a))):(t.push(getIntersectPoint(e,i,new Point(r,a),new Point(c,$))),e=new Point(r,a),i=new Point(c,$)),s==this.joins.length-2&&(e=null,i=null,t.push(new Point(c,$)))}for(let x=this.joins.length-2;x>=0;x--){let g=this.joins[x+1].x-this.joins[x].x,u=this.joins[x+1].y-this.joins[x].y,y=Math.atan2(u,g),d=180*y/Math.PI,f=this.joins[x+1].x+this.d/2*Math.cos((d+270)*Math.PI/180),T=this.joins[x+1].y+this.d/2*Math.sin((d+270)*Math.PI/180),b=this.joins[x].x+this.d/2*Math.cos((d+270)*Math.PI/180),p=this.joins[x].y+this.d/2*Math.sin((d+270)*Math.PI/180);null==e?(e=new Point(f,T),i=new Point(b,p),t.push(new Point(f,T))):(t.push(getIntersectPoint(e,i,new Point(f,T),new Point(b,p))),e=new Point(f,T),i=new Point(b,p)),0==x&&(e=null,i=null,t.push(new Point(b,p)))}return t}getMinPoint(){let t=new Point,e=this.getShapePoints();for(let i=0;i<e.length;i++)t.x=t.x<e[i].x?t.x:e[i].x,t.y=t.y<e[i].y?t.y:e[i].y;return t}getWidth(){let t,e=0,i=this.getShapePoints();for(let s=0;s<i.length;s++)t=t<i[s].x?t:i[s].x,e=e>i[s].x?e:i[s].x;return Math.abs(e-t)}getHeight(){let t,e=0,i=this.getShapePoints();for(let s=0;s<i.length;s++)t=t<i[s].y?t:i[s].y,e=e>i[s].y?e:i[s].y;return Math.abs(e-t)}getGradient(t,e,i){let s=this.getWidth()*i,l=this.getHeight()*i,h=document.createElement("canvas");h.width=s+1,h.height=l+1;let n=h.getContext("2d"),o;if(this.joins.length<=1)o=n.createLinearGradient(0,l/2,s,l/2);else{let r=this.getMinPoint();o=n.createLinearGradient((this.joins[0].x-r.x)*i,(this.joins[0].y-r.y)*i,(this.joins[this.joins.length-1].x-r.x)*i,(this.joins[this.joins.length-1].y-r.y)*i)}for(let a=0;a<t.length;a++){let c=t[a]>>16&255,$=t[a]>>8&255,x=255&t[a];o.addColorStop(1/(t.length-1)*a,"rgba("+c+","+$+","+x+","+e[a]+")")}return n.fillStyle=o,n.fillRect(0,0,s+1,l+1),PIXI.Texture.from(h)}setShape(t,e){let i=this.getShapePoints();if(i.length<=1)return;let s=this.getMinPoint(),l=Math.ceil(i.length/2),h=i.splice(0,l);t.moveTo((h[0].x-s.x)*e,(h[0].y-s.y)*e);for(let n=1;n<h.length-1;n++)if(this.isCurve){let o=2*this.d/Math.sqrt(Math.pow(h[n-1].x-h[n].x,2)+Math.pow(h[n-1].y-h[n].y,2)),r=2*this.d/Math.sqrt(Math.pow(h[n+1].x-h[n].x,2)+Math.pow(h[n+1].y-h[n].y,2));o=o<.5?o:.5,r=r<.5?r:.5,t.lineTo((h[n].x+(h[n-1].x-h[n].x)*o-s.x)*e,(h[n].y+(h[n-1].y-h[n].y)*o-s.y)*e),t.bezierCurveTo((h[n].x+(h[n-1].x-h[n].x)*o-s.x)*e,(h[n].y+(h[n-1].y-h[n].y)*o-s.y)*e,(h[n].x-s.x)*e,(h[n].y-s.y)*e,(h[n].x+(h[n+1].x-h[n].x)*r-s.x)*e,(h[n].y+(h[n+1].y-h[n].y)*r-s.y)*e),t.lineTo((h[n].x+(h[n+1].x-h[n].x)*r-s.x)*e,(h[n].y+(h[n+1].y-h[n].y)*r-s.y)*e)}else t.lineTo((h[n].x-s.x)*e,(h[n].y-s.y)*e);t.lineTo((h[h.length-1].x-s.x)*e,(h[h.length-1].y-s.y)*e);let a=i.splice(-l);t.lineTo((a[0].x-s.x)*e,(a[0].y-s.y)*e);for(let c=1;c<a.length-1;c++)if(this.isCurve){let $=2*this.d/Math.sqrt(Math.pow(a[c-1].x-a[c].x,2)+Math.pow(a[c-1].y-a[c].y,2)),x=2*this.d/Math.sqrt(Math.pow(a[c+1].x-a[c].x,2)+Math.pow(a[c+1].y-a[c].y,2));$=$<.5?$:.5,x=x<.5?x:.5,t.lineTo((a[c].x+(a[c-1].x-a[c].x)*$-s.x)*e,(a[c].y+(a[c-1].y-a[c].y)*$-s.y)*e),t.bezierCurveTo((a[c].x+(a[c-1].x-a[c].x)*$-s.x)*e,(a[c].y+(a[c-1].y-a[c].y)*$-s.y)*e,(a[c].x-s.x)*e,(a[c].y-s.y)*e,(a[c].x+(a[c+1].x-a[c].x)*x-s.x)*e,(a[c].y+(a[c+1].y-a[c].y)*x-s.y)*e),t.lineTo((a[c].x+(a[c+1].x-a[c].x)*x-s.x)*e,(a[c].y+(a[c+1].y-a[c].y)*x-s.y)*e)}else t.lineTo((a[c].x-s.x)*e,(a[c].y-s.y)*e);t.lineTo((a[a.length-1].x-s.x)*e,(a[a.length-1].y-s.y)*e),t.closePath()}setShapePosition(t,e){let i=new Point(t.x+this.point.x*e,t.y+this.point.y*e);this.getWidth(),this.getHeight();let s=this.getMinPoint();this.obj.position.set(i.x,i.y),this.obj.pivot.set(-s.x*e,-s.y*e),this.obj.rotation=this.a}isOverLap(t,e,i,s){let l=this.getWidth()*s+0,h=this.getHeight()*s+0,n=this.getMinPoint(),o=new Point(t.x+this.point.x*s- -n.x*s,t.y+this.point.y*s- -n.y*s);return!(o.x+l<-0)&&!(o.x>e)&&!(o.y+h<-0)&&!(o.y>i)}}function removeAllChild(t){for(;t.children[0];)t.removeChild(t.children[0])}function BGRToRGBString(t){return"#"+("000000"+(((255&t)<<16)+(65280&t)+(t>>16&255)).toString(16)).slice(-6)}function RGBStringToBGR(t){let e=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16);return e|i<<8|s<<16}function RGBStringToRGB(t){let e=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16);return s|i<<8|e<<16}function BGRToRGB(t){return RGBStringToRGB(BGRToRGBString(t))}function DECToBIN(t){return(t>>>0).toString(2)}function getIntersectPoint(t,e,i,s){let l,h;e.x-t.x==0?(l=null,h=t.x):e.y-t.y==0?(l=0,h=t.y):(l=(e.y-t.y)/(e.x-t.x),h=t.y-l*t.x);let n,o;s.x-i.x==0?(n=null,o=i.x):s.y-i.y==0?(n=0,o=i.y):(n=(s.y-i.y)/(s.x-i.x),o=i.y-n*i.x);let r,a;return null==l&&0==l?(r=h,a=o):0==l&&null==n?(r=o,a=h):null==l?a=n*(r=h)+o:null==n?a=l*(r=o)+h:0==l?r=((a=h)-o)/n:0==n?r=((a=o)-h)/l:(r=(o-h)/(l-n),a=l*r+h),new Point(r,a)}